\chapter{ Архитектура web-приложений } \label{chapt2}

%24

Перед началом активной разработки необходимо продумать основные идеи архитектуры приложения. В этой главе будут рассмотрены некоторые принципы проектирования web-приложений в условиях реального мира, особенности аппаратной составляющей и её влияние на проект.

\section{ Приложение, как слоёный пирог} \label{sect2_1}

Хорошее приложение должно иметь несколько слоёв абстракций.

Низший, основной слой, --- постоянное хранилище. Данные в хранилище лежат в основе приложения. 

%26

Следующий слой это бизнес логика. Именно бизнес логика определяет как  и какие данные будут записаны и прочитаны из хранилища. Основной язык для написания бизнес логики --- PHP, или другой скриптовый язык.

Следующий уровень абстракций --- логика взаимодействий. Именно она отвечает за то, какие данные будут использованы вместе и где. Это логика не зависит от бизнес логики и тем более от логики хранилища.

Верхний уровень абстракций --- это пользовательский интерфейс, который, обычно, представлен языком разметки. Именно этот слой отображает данные пользователю в приятном для него виде.

%27
Но как истинный кулинар не оставит своё блюдо без украшения, так и нельзя оставить пользовательский интерфейс без украшений, который в web-приложениях представлены в виде CSS.

Каждый слой имеет своё предназначение и предоставляет определённый функционал. Слои должны идти в правильном порядке для полноценного взаимодействия и не перемешиваться, хоть в реальных проектах зачастую и происходит смешивание этих слоёв.

\section{ Технологии расслоения } \label{sect2_2}

Верхним слоем абстракций являются каскадные таблицы стилей. В примерах будут встречаться встроенные стили, но всё же будем стараться разделять язык разметки от стилей.

Под уровнем представления лежит уровень отображения, который основан на языке разметки. Основным языком разметки является HTML и его семейство. Непроходимо разделять логику и представление(отображение) --- для этого необходимо отдельно выносить шаблоны, которые будут заполняться логикой на основе данных из хранилища. 

%28

При разделении логики и представления, вносимые изменения в один слоёв не будут влиять на другой. Таким образом, например, изменив представления с табличного на текстовое, логика никак не измениться.

Разделение логики и представления --- один из ключевых принципов проектирование программного обеспечения.

Для различных языков программирования существуют различные шаблонизаторы, которые помогают разделить логику и представление. Например, для PHP существует Smarty, предоставляющий простой и понятный синтаксис и разделяющий данные во внешнем приложении и внутри шаблона.

Следующий два слоя абстракций - бизнес логика и логика взаимодействия. Один из них определяет как пользователь будет работать с данными, другой - как приложение будет работать с данными. Способы реализации разделения на эти слои может варьироваться от языка программирования и архитектурных решений.

По соглашению, в PHP файлы логики взаимодействия хранятся в корневой директории, куда смотрит web-сервер и имеют расширения .php, а файлы бизнес логики лежат в другом каталоге и имею расширения .inc.

В Perl для разделения логики используются различные пространства имён: для бизнес логики MyApp::Core::*, а для логики взаимодействия MyApp::WWW::*.

%29

При создании гетерогенных слоёв, вся логика разделения на слои ложиться на инженера, который должен обеспечит взаимодействие между этими слоями.

Низший слой абстракций --- хранилище, которое отлично отделено от проекта и бизнес логики. Несмотря на то, что можно использовать бизнес логику внутри хранимых процедур в системах управления базами данных, в этой книге это рассматриваться не будет.

Не так важно, каким хранилищем пользоваться, ведь они все выполняют определённую работу. В книге будут рассматриваться MySQL как база данных и POSIX подобные файловые системы.

\section{ Проектирование интерфейсов приложения } \label{sect2_3}

Разделение приложения на слои означает необходимость проектирования взаимодействия между слоями. Но необходимо понимать, что бизнес логика и логика взаимодействия плотно переплетены и не требуют дополнительных изменений, в отличии от слоя представления.

Разделение на уровни абстракций помогают улучшить работу над проектом, ведь разные уровни будут находиться физически в разных файлов, что потребует меньшего взаимодействия между разработчиками, так же разработчику можно будет сосредоточиться на выполнении своей задачи в своём уровне и не задумываться о других уровнях. Разработчику внутри своего уровня нужно будет знать о соседних уровнях лишь интерфейс взаимодействия.

Говоря об интерфейсах между слоями необходимо понимать, что это не Java-подобные интерфейсы. В данном случае под интерфейсом понимается соглашение об обмене данными и сообщениями между слоями.

В контексте данной книге не будут рассматриваться методы проектирования пользовательских интерфейсов. Посему в разметке будут лишь встречаться теги загрузки файлов стилей и никакие стилей не будет описываться внутри тэгов. Таким образом будет отделена разметка от стилей.























\clearpage


